<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>AppWish - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ/ç·¨é›†</title>
	<style>
		body {
			font-family: Arial, sans-serif;
			line-height: 1.6;
			margin: 0;
			padding: 20px;
			background-color: #f4f4f4;
		}

		.container {
			max-width: 1000px;
			margin: auto;
			background: white;
			padding: 20px;
			border-radius: 5px;
			box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
		}

		h1 {
			color: #333;
			text-align: center;
			margin-bottom: 30px;
		}

		.form-group {
			margin-bottom: 20px;
		}

		label {
			display: block;
			margin-bottom: 5px;
			font-weight: bold;
		}

		input[type="text"],
		textarea,
		select {
			width: 100%;
			padding: 8px;
			border: 1px solid #ddd;
			border-radius: 4px;
			box-sizing: border-box;
		}

		textarea {
			height: 100px;
			resize: vertical;
		}

		button {
			background-color: #007bff;
			color: white;
			padding: 10px 15px;
			border: none;
			border-radius: 4px;
			cursor: pointer;
		}

		button:hover {
			background-color: #0056b3;
		}

		.back-link {
			display: block;
			text-align: center;
			margin-top: 20px;
			color: #007bff;
			text-decoration: none;
		}

		.back-link:hover {
			text-decoration: underline;
		}

		.header {
			background-color: #007bff;
			color: white;
			padding: 10px 20px;
			display: flex;
			justify-content: space-between;
			align-items: center;
		}

		.header a {
			color: white;
			text-decoration: none;
		}

		.account-menu {
			position: relative;
		}

		.account-btn {
			background: none;
			border: none;
			color: white;
			cursor: pointer;
			font-size: 1em;
		}

		.dropdown-content {
			display: none;
			position: absolute;
			right: 0;
			background-color: #f9f9f9;
			min-width: 160px;
			box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);
			z-index: 1;
		}

		.dropdown-content a {
			color: black;
			padding: 12px 16px;
			text-decoration: none;
			display: block;
		}

		.dropdown-content a:hover {
			background-color: #f1f1f1;
		}

		.account-menu:hover .dropdown-content {
			display: block;
		}

		.image-preview {
			max-width: 300px;
			max-height: 300px;
			margin-top: 10px;
		}

		.form-group {
			margin-bottom: 20px;
		}

		.form-group label {
			display: block;
			margin-bottom: 5px;
			font-weight: bold;
		}

		.form-control {
			width: 100%;
			padding: 8px;
			border: 1px solid #ddd;
			border-radius: 4px;
			box-sizing: border-box;
		}

		.image-upload {
			display: flex;
			align-items: center;
			margin-bottom: 20px;
		}

		.image-preview {
			max-width: 200px;
			max-height: 200px;
			margin-top: 10px;
			display: none;
		}

		.file-input-wrapper {
			position: relative;
			overflow: hidden;
			display: inline-block;
		}

		.file-input-wrapper input[type=file] {
			font-size: 100px;
			position: absolute;
			left: 0;
			top: 0;
			opacity: 0;
		}

		.file-input-wrapper .btn {
			display: inline-block;
			padding: 8px 12px;
			background-color: #007bff;
			color: white;
			border: none;
			border-radius: 4px;
			cursor: pointer;
		}

		.file-input-wrapper .btn:hover {
			background-color: #0056b3;
		}
	</style>
</head>

<body>
	<header class="header">
		<a href="/" class="logo">AppWish</a>
		<div class="account-menu" th:if="${#authorization.expression('isAuthenticated()')}">
			<button class="account-btn" th:text="${#authentication.name}">ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ</button>
			<div class="dropdown-content">
				<a th:href="@{/users/profile}">ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«</a>
				<a th:href="@{/messages/chatrelate}">ãƒãƒ£ãƒƒãƒˆé–¢é€£</a>


				<a th:href="@{/projects/projectsrelate}">ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé–¢é€£</a>

				<a th:href="@{/projects/favorites}">ãŠæ°—ã«å…¥ã‚Š</a>
				<a th:href="@{/logout}">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</a>
			</div>
		</div>
		<div class="account-menu" th:unless="${#authorization.expression('isAuthenticated()')}">
			<a th:href="@{/login}" class="btn">ãƒ­ã‚°ã‚¤ãƒ³</a>
			<a th:href="@{/users/register}" class="btn">æ–°è¦ç™»éŒ²</a>
		</div>
	</header>

	<div class="container">
		<h1 th:text="${project.id == null ? 'ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ' : 'ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç·¨é›†'}"></h1>

		<form th:action="@{${project.id == null ? '/projects/create' : '/projects/edit/' + project.id}}" method="post"
			th:object="${project}" enctype="multipart/form-data">
			<!--              <form th:action="@{${project.id == null ? '/projects/create' : '/projects/edit/' + project.id}}" method="post" enctype="multipart/form-data" th:object="${project}">-->
			<input type="hidden" th:field="*{id}" />



			<div class="form-group">
				<label for="title">ã‚¿ã‚¤ãƒˆãƒ«ï¼š</label>
				<input type="text" id="title" th:field="*{title}" required>
			</div>

			<div class="form-group">
				<label for="category">ã‚«ãƒ†ã‚´ãƒªãƒ¼ï¼š</label>
				<select id="category" th:field="*{category}" required>
					<option value="">ã‚«ãƒ†ã‚´ãƒªãƒ¼ã‚’é¸æŠã—ã¦ãã ã•ã„</option>
					<option th:each="cat : ${T(com.example.appwish.model.project.ProjectCategory).values()}"
						th:value="${cat}" th:text="${cat.displayName}">
					</option>
				</select>
			</div>

			<div class="form-group">
				<label for="input-type">å…¥åŠ›æ–¹æ³•ã‚’é¸æŠã—ã¦ãã ã•ã„ï¼š</label>
				<select id="input-type" name="inputType" onchange="toggleInputMethod()">
					<option value="structured">æ§‹é€ åŒ–ãƒ•ã‚©ãƒ¼ãƒ </option>
					<option value="freeform">è‡ªç”±è¨˜è¿°</option>
					<option value="both" selected>ä¸¡æ–¹</option>
				</select>
			</div>

			<div class="form-group">
				<label for="projectImage">ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç”»åƒï¼š</label>
				<div class="image-upload">
					<img th:if="${project.imageUrl}" th:src="${project.imageUrl}" alt="Current Project Image"
						class="image-preview" id="imagePreview">
					<img th:unless="${project.imageUrl}" src="" alt="" class="image-preview" id="imagePreview">
					<div class="file-input-wrapper">
						<button type="button" class="btn">ç”»åƒã‚’é¸æŠ</button>
						<input type="file" name="projectImage" id="projectImage" accept="image/*"
							onchange="previewImage(this);">
					</div>
				</div>
			</div>



			<div id="structured-form">
				<div class="form-group">
					<label for="ideaSeed">ğŸŒ± ã‚¿ã‚¤ãƒˆãƒ«</label>
					<textarea id="ideaSeed" th:field="*{ideaSeed}"
						placeholder="ã‚ãªãŸã®æ—¥å¸¸ã‚„ä»•äº‹ã§ã€Œã“ã‚“ãªã‚¢ãƒ—ãƒªãŒã‚ã£ãŸã‚‰ã„ã„ã®ã«ã€ã¨æ€ã£ãŸã“ã¨ã‚’æ›¸ã„ã¦ãã ã•ã„ã€‚"></textarea>
				</div>
				<div class="form-group">
					<label for="problem">ğŸ” èª²é¡Œã®ç™ºè¦‹</label>
					<textarea id="problem" th:field="*{problem}"
						placeholder="æœ€è¿‘ã€ä¸ä¾¿ã ãªã¨æ„Ÿã˜ãŸã“ã¨ã‚„è§£æ±ºã—ãŸã„å•é¡Œã‚’æ›¸ã„ã¦ãã ã•ã„ã€‚"></textarea>
				</div>
				<div class="form-group">
					<label for="idealSituation">ğŸŒˆ ç†æƒ³ã®çŠ¶æ³</label>
					<textarea id="idealSituation" th:field="*{idealSituation}"
						placeholder="ãã®å•é¡ŒãŒè§£æ±ºã•ã‚ŒãŸã‚‰ã€ã‚ãªãŸã®ç”Ÿæ´»ã¯ã©ã†å¤‰ã‚ã‚Šã¾ã™ã‹ï¼Ÿ"></textarea>
				</div>
				<div class="form-group">
					<label for="currentSolution">ğŸ› ï¸ ç¾åœ¨ã®å¯¾å‡¦æ³•</label>
					<textarea id="currentSolution" th:field="*{currentSolution}"
						placeholder="ãã®å•é¡Œã«å¯¾ã—ã¦ã€ä»Šã¯ã©ã®ã‚ˆã†ã«å¯¾å‡¦ã—ã¦ã„ã¾ã™ã‹ï¼Ÿ"></textarea>
				</div>
				<div class="form-group">
					<label for="userStory">ğŸ‘¥ ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¹ãƒˆãƒ¼ãƒªãƒ¼</label>
					<textarea id="userStory" th:field="*{userStory}"
						placeholder="ã“ã®ã‚¢ãƒ—ãƒªã‚’ä½¿ã†äººã¯ã€ã©ã‚“ãªå ´é¢ã§ã©ã®ã‚ˆã†ã«ä½¿ã†ã¨æ€ã„ã¾ã™ã‹ï¼Ÿå…·ä½“ä¾‹ã‚’æŒ™ã’ã¦ãã ã•ã„ã€‚"></textarea>
				</div>
				<div class="form-group">
					<label for="emotionalConnection">ğŸ˜Š æ„Ÿæƒ…çš„ãªã¤ãªãŒã‚Š</label>
					<textarea id="emotionalConnection" th:field="*{emotionalConnection}"
						placeholder="ã“ã®ã‚¢ãƒ—ãƒªãŒã‚ã£ãŸã‚‰ã€ã©ã‚“ãªæ°—æŒã¡ã«ãªã‚Šã¾ã™ã‹ï¼Ÿ"></textarea>
				</div>
				<div class="form-group">
					<label>â­ é‡è¦æ©Ÿèƒ½ï¼ˆ3ã¤ã¾ã§ï¼‰</label>
					<input type="text" th:field="*{keyFeatures[0]}" placeholder="é‡è¦ãªæ©Ÿèƒ½1">
					<input type="text" th:field="*{keyFeatures[1]}" placeholder="é‡è¦ãªæ©Ÿèƒ½2">
					<input type="text" th:field="*{keyFeatures[2]}" placeholder="é‡è¦ãªæ©Ÿèƒ½3">
				</div>
				<div class="form-group">
					<label for="usabilityPoint">ğŸ”§ ä½¿ã„ã‚„ã™ã•ã®ãƒã‚¤ãƒ³ãƒˆ</label>
					<input type="text" id="usabilityPoint" th:field="*{usabilityPoint}"
						placeholder="ã“ã®ã‚¢ãƒ—ãƒªã‚’ä½¿ã†ä¸Šã§ã€æœ€ã‚‚é‡è¦ãªä½¿ã„ã‚„ã™ã•ã®ãƒã‚¤ãƒ³ãƒˆã¯ä½•ã§ã™ã‹ï¼Ÿ">
				</div>
				<div class="form-group">
					<label for="futurePossibility">ğŸš€ å°†æ¥ã®å¯èƒ½æ€§</label>
					<textarea id="futurePossibility" th:field="*{futurePossibility}"
						placeholder="ã“ã®ã‚¢ãƒ—ãƒªãŒæˆåŠŸã—ãŸã‚‰ã€å°†æ¥ã©ã‚“ãªæ©Ÿèƒ½ã‚„ä½¿ã„æ–¹ãŒè¿½åŠ ã•ã‚Œã‚‹ã¨é¢ç™½ã„ã§ã™ã‹ï¼Ÿ"></textarea>
				</div>
				<div class="form-group">
					<label for="appealPoint">ğŸ“¢ é­…åŠ›çš„ãªãƒã‚¤ãƒ³ãƒˆ</label>
					<input type="text" id="appealPoint" th:field="*{appealPoint}" placeholder="ã“ã®ã‚¢ãƒ—ãƒªã®é­…åŠ›ã‚’ä¸€è¨€ã§è¡¨ã™ã¨ã—ãŸã‚‰ï¼Ÿ">
				</div>
			</div>

			<div id="freeform-input">
				<div class="form-group">
					<label for="freeformIdea">è‡ªç”±ã«ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’è¨˜è¿°ã—ã¦ãã ã•ã„ï¼š</label>
					<textarea id="freeformIdea" th:field="*{freeformIdea}" rows="10"
						placeholder="ã‚ãªãŸã®ã‚¢ãƒ—ãƒªã‚¢ã‚¤ãƒ‡ã‚¢ã‚’è‡ªç”±ã«è¨˜è¿°ã—ã¦ãã ã•ã„ã€‚"></textarea>
				</div>
			</div>

			<button type="submit">ä¿å­˜</button>
		</form>
		<a th:href="@{/projects}" class="back-link">ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä¸€è¦§ã«æˆ»ã‚‹</a>
	</div>

	<script>
		function toggleInputMethod() {
			var inputType = document.getElementById('input-type').value;
			var structuredForm = document.getElementById('structured-form');
			var freeformInput = document.getElementById('freeform-input');

			switch (inputType) {
				case 'structured':
					structuredForm.style.display = 'block';
					freeformInput.style.display = 'none';
					break;
				case 'freeform':
					structuredForm.style.display = 'none';
					freeformInput.style.display = 'block';
					break;
				case 'both':
					structuredForm.style.display = 'block';
					freeformInput.style.display = 'block';
					break;
			}
		}

		function previewImage(input) {
			var preview = document.getElementById('imagePreview');
			if (input.files && input.files[0]) {
				var reader = new FileReader();
				reader.onload = function (e) {
					preview.src = e.target.result;
					preview.style.display = 'block';
				}
				reader.readAsDataURL(input.files[0]);
			} else {
				preview.src = "#";
				preview.style.display = 'none';
			}
		}



	</script>
</body>

</html>